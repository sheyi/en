<!DOCTYPE HTML>
<html><head>
<meta http-equiv="Cache-Control" content="max-age=7200" />

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>linux基础教程及常用配置 | H!Grid博客镜像站点</title>
<meta name="author" content="higrid">

<meta name="description" content="现在用Linux用户越来越多了，higrid从基础教程到以后问题的解决会汇总出来一点一点讲给大家。网上那么多教程，为什么还要做这个教程呢？主要作为知识总结和简单入门使用。">

<meta name="keywords" content="linux, linux教程, linux配置">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<meta property="og:title" content="linux基础教程及常用配置"/>
<meta property="og:site_name" content="H!Grid博客镜像站点"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link rel="author" href="http://higrid.net" />
<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="H!Grid博客镜像站点 Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">var site = {BASE_URI: '/'};var _js2load = [];</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">H!Grid博客镜像站点</a>
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
  
        <li><a href="/" title="主页">主页</a></li>      
        <li><a href="/about/" title="关于">关于</a></li>      
        <li><a href="/archives/" title="归档">归档</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>其它链接<b class='caret'></b></a>
        <ul class='dropdown-menu'>
    
          <li><a href="//higrid.net" title="嗨网在线">嗨网在线</a></li>    
          <li><a href="https://github.com/sheyi" title="gihtub">gihtub</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/higridnet">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/sheyi/higrid">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div></header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1>H!Grid博客镜像站点 <small>基于PHP语言：建站更容易、更快速、更方便、更强悍</small></h1></div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="page" class="page well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title">linux基础教程及常用配置</h1>
      
    </header>
    
    <section id='before_content_widget'></section>
    <div class="entry">
      
        <h2 id="linux运行级别和启动流程">linux运行级别和启动流程</h2>
<p>只有了解linux的启动流程才能更好的去优化和配置Linux,譬如说一台服务器我为什么要保证3，5启动软件即可，是怎么启动的呢？</p>
<ol>
<li>bios找到mbr主引导区，这个东西才512字节，深入的可以查询一下</li>
<li>进入grub界面找启动内核</li>
<li>读取kernel内核文件 /boot/vmlinuz-*</li>
<li>读取init的镜像文件 /boot/initrd-*</li>
<li>init读取/etc/inittab</li>
<li>读取启动级别(id:3:initdefault)</li>
<li>读取/etc/rc.d/rc.sysinit,完成时间、主机名称，还要分区表/etc/fstab</li>
<li>读取/etc/rc.d/rc脚本，通过脚本转换3级别，然后启动/etc/rc.d/rc3.d/下所有S来头的服务，不启动目录下K开头的服务</li>
<li>进入登录界面</li>
</ol>
<a id="more"></a> 

<h3 id="我们服务器设置的一般控制inittab来控制是图形界面还是终端_sudo_init_0_关机">我们服务器设置的一般控制inittab来控制是图形界面还是终端 sudo init 0 关机</h3>
<pre><code>&gt;vim /etc/inittab    #init启动时候加载的启动级别

0 关机
1 单用户
2 不支持nfs(网络文件系统)
3 终端页面
4 未被使用
5 图形界面
6 重启
</code></pre><p>当你是终端的时候你会发现你登录的是3级别，如果是X11图形界面的时候是5,可以修改<code>id:3:initdefault</code>,来修改启动级别<br>如何设置开机启动和开机启动的原理<br>我们如上还是终端启动，我们就进入/etc/rc.d/rc3.d 我们看到S开头和K开头，你可以理解成start和kill s开头的都启动K开头的都是不启动 ubuntu在 /etc/rc3.d/</p>
<pre><code>#centos设置开机启动
&gt;chkconfig mysql on                #设置开机启动
&gt;chkconfig --list|grep mysql     #查看哪些启动级别,发现除了0，1，6关闭其他都开启
&gt;cd /etc/rc.d &amp;&amp; ls -l            #rcx.d是启动级别
&gt;cd rc3.d &amp;&amp; ll|grep mysql        #显示如下，当然你进入2，4，5也是一样的，这就是说为什么服务器要保证开机3，5启动
lrwxrwxrwx  1 root root 16 3月  14 19:22 S64mysqld -&gt; ../init.d/mysqld

#ubuntu设置开机启动
&gt;sudo apt-get install dialog rcconf     #安装rcconf
&gt;sudo rcconf                            #出现图形界面可以设置
</code></pre><p>一般我们使用apt-get或者yum安装的，也就是仓库源安装的都可以使用<code>service XXX start</code>,其实这种东西存储在/etc/init.d/文件夹下，你可以自己写脚本，放到/etc/init.d/使用<code>chmod a+x xxx</code>给权限，然后<code>service xxx start</code>启动,譬如我们二进制安装的nginx，然后自己手动写个nginx启动脚本。</p>
<h3 id="常用压缩与解压命令">常用压缩与解压命令</h3>
<p>一般需要会几个常用的压缩包的解压和压缩，解压是因为万一你有二进制包要安装，你带会解压吧！压缩-你要备份一个网站不可能一个文件一个文件备份吧~所以学习压缩，这里边我讲下常用的tar tar.gz常见，.tar.bz2我记得php下载官网好像就有这个格式，为什么还学zip，兄弟，因为windows平台对zip支持很好，万一你要下载网站日志到windows上分析呢~是吧~ higrid建议这几个必会，一般压缩成gz格式，那么压缩就是<code>tar cvfz higridcms.tar.gz hicms/</code> 解压缩 <code>tar xvfz higridcms.tar.gz</code></p>
<h4 id="tar压缩包">tar压缩包</h4>
<pre><code>&gt;tar cf file.tar file
#联想记忆
 #c create
#f file 

&gt;tar xf file.tar -C /data
#x extract 记住x
#-C 这是解压到哪里去

#查看压缩包
&gt;tar tf file.tar.gz
</code></pre><h4 id="tar-gz压缩包">tar.gz压缩包</h4>
<pre><code>&gt;tar czf file.tar.gz file
#联想记忆
 #c create
#z gz
#f file 

&gt;tar zxf file.tar.gz -C /data
#x extract 记住x
#-C 这是解压到哪里去

#查看压缩包
&gt;tar tf file.tar.gz
</code></pre><h4 id="zip压缩包">zip压缩包</h4>
<pre><code>&gt;yum install unzip zip -y #安装包
&gt;unzip file.zip           #解压
&gt;unzip -l file.zip        #查看压缩包中的内容
&gt;zip  file.zip file       #压缩
</code></pre><h4 id="tar-bz2">tar.bz2</h4>
<pre><code>&gt;tar jxf file.tar.bz2      #解压
&gt;&gt;tar tf file.tar.bz2      #查看压缩包内容
&gt;tar jcf file.tar.bz2 file #压缩
</code></pre><h3 id="网络配置">网络配置</h3>
<h4 id="1-_修改ip_只能暂时的，重启就失效了">1. 修改ip 只能暂时的，重启就失效了</h4>
<pre><code>ifconfig eth0 192.168.1.1
ifconfig eth0 192.168.0.2 netmask 255.255.255.0

#修改dns
route add default gw 192.168.1.1
</code></pre><h4 id="2-_修改网络配置文件">2. 修改网络配置文件</h4>
<p>现在用的最多的应该就是centos和ubuntu这两个吧，我就拿这两个做讲解，这个拖拖的你带会配置万一让你修改dhcp到static，我擦 修改错了，这个除了机房能控制，你购买的代理商都很难再弄上了~~~</p>
<pre><code>#centos配置
&gt;cd /etc/sysconfig/network-scripts/

#centos配置

&gt;vim /etc/sysconfig/netword-scripts/ifcfg-eth1 #针对自己的网卡

DEVICE=eth1                                  #网卡名称
TYPE=Ethernet                                #网卡类型
IPADDR=192.168.1.1                            #IP地址
NETMASK=255.255.255.0                        #子网掩码
GATEWAY=192.168.1.1                            #网卡
DNS1=202.102.224.68                            #DNS
DNS2=8.8.8.8
ONBOOT=yes                                    #主机启动加载    
NM_CONTROLLED=yes                            #实施生效，修改后不需要重启网卡立即生效
BOOTPROTO=static                            #静态ip

&gt;service network restart                    #重启网卡

&gt;vim  vim /etc/resolv.conf                    #修改DNS

nameserver 202.102.224.68
nameserver 8.8.8.8

#ubuntu 配置
&gt;vim /etc/network/interfaces
auto eth0
iface eth0 inet static
address 192.168.1.108
netmask 255.255.255.0
gateway 192.168.1.1

#修改dns
vim /etc/resolv.conf
nameserver 8.8.8.8

#重启生效
/etc/init.d/networking restart
</code></pre><h3 id="防火墙设置">防火墙设置</h3>
<h4 id="iptables">iptables</h4>
<pre><code>#开启防火墙
&gt;service iptables start

#开机启动
&gt;chkconfig iptables on           

#保存策略文件在 /etc/sysconfig/iptables -- centos
iptabels [-t 表名] 
&gt;iptables -t nat -L             #查看nat表
&gt;iptables -L                     #查看防火墙，默认是filter
&gt;iptables -F                    #删除防火墙 -X清除自定义链接 -Z清除所有链统计
&gt;service iptables save        #保存防火墙策略
&gt;service iptables restart    #重启
&gt;iptables -I INPUT -s 0.0.0.0 -j ACCEPT
iptables 
    -A 追加规则链            再最后加入此规则
    -I INPUT             插入INPUT
    -D 链                 删除链
    -P 如果策略值缺省就强制使用此策略链
    -i 输入网卡
    -o 输出网卡
    -p 协议
    -s 源 ip
    -d 目标ip
    -j 动作    

iptables -A INPUT -i eth0 -p all -s 源ip --sport 源端口 -d 目标ip --dport 目标端口 -j 动作

#常用模块状态
&gt;iptables -I INPUT 1 -m state --state ESTABLISHED,RELATED -j ACCEPT

#允许192.168.1.109登录ssh端口    
&gt;iptables -A INPUT -i eth0 -p tcp -s 192.168.1.109 --dport 22 -j ACCEPT

#禁止这个IP访问我的80端口
&gt;iptables -A INPUT -i eth0 -p all -s 192.168.1.108 --dport 80 -j ACCEPT
 &gt;iptables -D INPUT 1                        #删除第一条规则
&gt;iptables -A INPUT -m mac --mac-source 00:00:00:00:00  -j DROP #禁止mac地址访问我
&gt;iptables -t filter -P INPUT DROP        #默认规则清除所有设置后的所有端口，注意哈，当初我学习的时候，第一个设置的，结果我自己上不去了（最后）
</code></pre><h4 id="一般服务器简单设置实例">一般服务器简单设置实例</h4>
<pre><code>iptables -F
#内部网络使用
iptables -A INPUT -i lo -j ACCEPT            
#状态连接                
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
#允许80端口
iptables -A INPUT -p tcp --dport  80 -j ACCEPT 
#允许ssh
iptables -A INPUT -p tcp --dport  22 -s x.x.x.x -j ACCEPT
#允许mysql
iptables -A INPUT -p tcp --dport  3306 -j ACCEPT
#允许ftp
iptables -A INPUT -p tcp --dport  21 -j ACCEPT
 #允许邮件服务器
iptables -A INPUT -p tcp --dport 110 -j ACCEPT
iptables -A INPUT -p tcp --dport 25 -j ACCEPT
#关闭掉其他所有
iptables -P INPUT  DROP
#保存防火墙规则
service iptables save
#重启生效
service iptables restart
</code></pre><h5 id="selinux">selinux</h5>
<pre><code>&gt;sestatus                  #查看selinux的状态
&gt;vim /etc/selinux/config
SELINUX=disabled          #禁用selinux
&gt;reboot                   #重启服务器才能生效
</code></pre><h3 id="软件安装yum">软件安装yum</h3>
<h4 id="光盘安装">光盘安装</h4>
<blockquote>
<p>这个如果是服务器的话，估计很少用到，也不可能谁没事就挂载个光盘来吧！当然你没事你可以做测试玩~</p>
</blockquote>
<h5 id="首先，你要挂载关盘">首先，你要挂载关盘</h5>
<pre><code>mount /dev/cdrom /media
</code></pre><h5 id="修改源">修改源</h5>
<pre><code>#进入源仓库配置文件
cd /etc/yum.repos.d/

#移除根仓库源 不然会首先找这个
mv CentOS-Base.repo CentOS-Base.repo.bak

#修改配置信息

[c6-media]
name=CentOS-$releasever - Media
baseurl=file:///media/
#关闭签名
gpgcheck=0                
#开启原件源仓库
enabled=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
</code></pre><h5 id="安装软件">安装软件</h5>
<pre><code>&gt;rpm -ivh xxx.rpm  #软件的时候,可能依赖包没安装，最可能的是你安装的依赖会很多，所以我们用yum
&gt;yum list           #查看软件列表
&gt;yum install mysql #安装mysql 如果你感觉输入y比较烦，就yum install mysql -y
&gt;rpm -qa|grep mysql#查看安装mysql的一些包和依赖包
&gt;yum remove  mysql #卸载，可能卸载掉一些依赖库，但是这些依赖库可能对你还很有用
&gt;rpm -e xxxx       #单个卸载 --nodeps 是强制卸载
</code></pre><h5 id="修改镜像源">修改镜像源</h5>
<blockquote>
<p>这个我们经常使用，因为我的服务器一般都在国内，一般安装好的都是centos的原有镜像，速度来说肯定没有国内快，所以我就换成国内的镜像源，一般我用的是163的，因为换太简单了，当然你也可以自己手动写，没有什么技术含量</p>
<p>cd /etc/yum.repos.d/                                        #进入<br>mv CentOS-Base.repo     CentOS-Base.repo.bak                    #备份<br>wget <a href="http://mirrors.163.com/.help/CentOS6-Base-163.repo" target="_blank" rel="external">http://mirrors.163.com/.help/CentOS6-Base-163.repo</a>        #下载<br>mv CentOS6-Base-163.repo  CentOS-Base.repo<br>yum makecache                                                #清楚本地缓存</p>
</blockquote>
<pre><code>#按照这种格式就可以填写你自己的仓库源 其中$releasever是版本,我的环境是6,$basearch我的是i386
[base]
name=CentOS-$releasever - Base - 163.com                            #镜像源名称
baseurl=http://mirrors.163.com/centos/$releasever/os/$basearch/    #镜像源地址
gpgcheck=1                                                        #gbk签名
gpgkey=http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-6        #gpk签名地址

#released updates 
[updates]
name=CentOS-$releasever - Updates - 163.com
baseurl=http://mirrors.163.com/centos/$releasever/updates/$basearch/
gpgcheck=1
gpgkey=http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-6

#additional packages that may be useful
[extras]
name=CentOS-$releasever - Extras - 163.com
baseurl=http://mirrors.163.com/centos/$releasever/extras/$basearch/
gpgcheck=1
gpgkey=http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-6

#additional packages that extend functionality of existing packages
[centosplus]
name=CentOS-$releasever - Plus - 163.com
baseurl=http://mirrors.163.com/centos/$releasever/centosplus/$basearch/
gpgcheck=1
enabled=0
gpgkey=http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-6

#contrib - packages by Centos Users
[contrib]
name=CentOS-$releasever - Contrib - 163.com
baseurl=http://mirrors.163.com/centos/$releasever/contrib/$basearch/
gpgcheck=1
enabled=0
gpgkey=http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-6        

&gt;yum makecache
&gt;yum list                
</code></pre><h4 id="查看服务器进程">查看服务器进程</h4>
<pre><code>&gt;ps -ef |grep httpd      #查看进程
&gt;pstrese | grep httpd #从进程树查看

&gt;netstat -tunpl | grep 80 
-t    tcp
-u  udp 

&gt;uptime #显示登录信息和平均负载
&gt;who     #显示正在登录的用户
</code></pre><h5 id="关闭进程">关闭进程</h5>
<pre><code>&gt;pkill mysql
&gt;kill -9 pid
</code></pre><h3 id="修改主机名称">修改主机名称</h3>
<blockquote>
<p>临时修改</p>
</blockquote>
<pre><code>hostname higrid
</code></pre><blockquote>
<p>修改配置文件修改</p>
</blockquote>
<pre><code>vim /etc/sysconfig/network    
</code></pre><h3 id="硬盘分区和挂载">硬盘分区和挂载</h3>
<blockquote>
<p>这个很重要的了，如果你用云主机或者其它的服务器的时候肯定都待有分区和挂载，因为我发现大部分都不会给你挂载的，譬如阿里云、金山云、电信云等</p>
</blockquote>
<p>1.分区表配置文件</p>
<pre><code>&gt;vim /etc/fstab            #分区配置文件表
/dev/cdrom  /media iso9660    defaults 0 0 

mount -a #测试光驱挂载是否成功

fdisk /dev/sdb
p #查看当前分区表
l #查看linux支持的文件系统
n #增加新分区
w #保存分区

&gt;fdisk -l                                 #查看文件分区，找到为分区的
&gt;fdisk /dev/sdb                            #我们需要的分区/dev/sdb
&gt;Command(m for help):m                    #寻求帮助

&gt;Command action                            #增加一个分区，然后选择 e扩展分区 p主分区
   e   extended
   p   primary partition (1-4)
&gt;p                                        #分为主分区
&gt;Partition number (1-4): 1                #主分区number
&gt;First cylinder (1-1044, default 1): 1  #设置柱面
&gt;Last cylinder, +cylinders or +size{K,M,G} (1-1044, default 1044): +3076M #设置硬盘大小
&gt;p                                         #查看系统分区
&gt;t                                        #修改系统类型
&gt;l                                        #显示系统类型
&gt;w                                        #保存系统分区
&gt;mkfs.ext4    /dev/sdb1                    #格式化硬盘
&gt;mkdir /data &amp;&amp; mount /dev/sdb1    /data    #挂载硬盘
&gt;df -h                                     #查看硬盘挂载状况
&gt;vim /etc/fstab                            #设置开机挂载硬盘,添加如下
/dev/sdb1  /data ext4   defaults  1 2    #这个和如下一一对应
fs_spec　        fs_file　    fs_type　    fs_options　fs_dump　  fs_pass    
挂载的文件系统    挂载点位置    文件系统类型  参数选项     是否dump   无需启动扫描0 跟分区启动扫描1 其它2即可
&gt;mount -a                                 #测试一挂载，千万要测试，我记得我做的最低级错误就是写错了，结果主机重启了，你懂得起不来了，我擦 损失大了
&gt;unmout /dev/sdb1                        #卸载硬盘分区
</code></pre><h3 id="用户权限管理">用户权限管理</h3>
<ol>
<li><code>ls -l</code></li>
<li><code>chmod a+x xxx.sh</code></li>
<li><code>sudo /usr/sbin/useradd higrid</code></li>
</ol>
<h3 id="文件权限">文件权限</h3>
<p>文件权限三种 r-w-x 可读，可写，可执行 ，针对与文件和目录是不同的</p>
<blockquote>
<p>上边我们切割一下</p>
<p>d —文件类型 目录</p>
<p>rwx|rwx|r-xm,每三个分成一组</p>
</blockquote>
<ul>
<li>第一组 是文件所有者，这里是root有可读可写可执行(u)</li>
<li>第二组 是root组的其它用户有可读可写可执行         (g)</li>
<li><p>第三组 是other用户，就是既不属于文件所有者用户也不属于用户所有组，可读可执行     (o)<br>r w x —&gt; 4 2 1 对应这4个值 ，你可以想成2的0次方，1次方，2次方</p>
<p> 对于目录来说 x 可执行权限意思是可以切换进入到这个目录 也就是cd /filedir<br> 对于目录来说 w 可写就是创建文件的权限或者创建文件夹的权限  mkdir test<br> 对于目录来说 r 可读就是列出目录的权限 譬如 ls -l</p>
<p> 对于文件来说 x 可执行，譬如.sh脚本有没有执行的权利<br> 对于文件来说 w 可写，就是写入，譬如vi demo.txt必须有w权限<br> 对于文件来说 r 可读权限，就是more cat less tail等能不能读取数据</p>
</li>
</ul>
<blockquote>
<p>chmod 给文件或者目录权限</p>
<p>chmod 0777 test.txt              #test.txt的权限-rwxrwxrwx<br>chmod u+rwx,g+rwx,o+rwx test.txt #同上的权限 +给权限 -是删除权限<br>chmod a+x                        #所有用户追加x权限<br>chmod -R 777 dir                 #递归添加dir目录所有权限</p>
<p>chown 分配用户和组</p>
<p>chown www:www /var/www/html     #给html目录 www用户和www用户组权限</p>
<p>id 查看用户信息</p>
<p>id xiaowei<br>    uid=501(xiaowei) gid=501(xiaowei) groups=501(xiaowei)</p>
<p>gpasswd -a xiaowei root #将xiaowei用户添加到root<br>gpasswd -d xiaowei root #从root组中删除</p>
<p>usermod -L xiaowei      #锁定xiaowei用户<br>usermod -U xiaowei      #解锁xiaowei用户</p>
<p>sudo 权限设置</p>
<p>visudo<br>xiaowei localhost=/usr/sbin/useradd #添加到文件中，给xiaowei有useradd权限<br>sudo useradd xiaowei1               #可以添加用户了</p>
<p>添加删除用户</p>
<p>groupadd   xiaowei                 #添加用户组<br>useradd -g xiaowei xiaowei         #添加用户并且添加到用户组<br>userdel -r xiaowei                 #删除用户</p>
</blockquote>
<h3 id="ACL权限分配">ACL权限分配</h3>
<p>一个公司里不可能让所有人都有root权限，所以在一些文件和文件夹处理，以及权限处理的时候就很棘手，这个时候我们就需要ACL给用户进行权限分配</p>
<p>1.加权限</p>
<pre><code>&gt;setfacl -m u:username:rwx filedir #设置ACL
</code></pre><p>2.查看权限</p>
<pre><code>&gt;getfacl filedir                   #获取ACL

# file: filedir
# owner: root
# group: root
user::rwx
user:username:rwx
group::r-x
mask::rwx
other::r-x
</code></pre><p>3.删除权限</p>
<pre><code>&gt;setfacl -b u:username filedir     #删除u这个用户的acl权限 
&gt;setfacl -b filedir                #删除filedir的ACL所有权限
</code></pre><p>4.分配权限</p>
<blockquote>
<p>nginx有时候就是因为权限的问题造成了nginx对cpu的负载过高，我们可以直接使用ACL对其分配权限</p>
</blockquote>
<pre><code>#nginx执行的用户是www，我们要www有nginx文件夹的所有权限
#nginx的安装目录是/usr/local/nginx
&gt;setfacl -m u:www:rwx -R /usr/local/nginx #-R 文件递归
</code></pre><h3 id="任务计划">任务计划</h3>
<p>我们有时候定时备份，或者说定时执行一些脚本这是我们必须会的</p>
<pre><code>&gt;crontab -e                   #编写定时计划
2  *  *  *  *  /sbin/init 0   #这里是每2分钟关机一次，当然你已经关机了
#分 时 日 月 周  脚本
&gt;crontab -r                   #删除定时任务
&gt;crontab -l                   #列出定时任务
</code></pre>
      
    </div>
    <section id='after_content_widget'></section>
    
    
    <div class="clearfix"></div>
  </div>
</div>
</article>


    <section id='after_post_widget'></section>    
	<div id="comments">
<!-- UY BEGIN -->
<div id="uyan_frame"></div>
<!-- UY END -->

</div></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:blog.higrid.net">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">分类</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近文章</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">标签云</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_random_posts" class="widget panel panel-primary">
  <div class="panel-heading">随机文章</div>  <div class='hexo_random_posts' data-count=8></div></div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2013-2014 higrid
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_3552716'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D3552716%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span>  </div>
  <div id="copyright">Copyright &copy; 2014 嗨网在线HiGrid.net. All rights reserved.<span class="pull-right"> 最后更新时间: <em>2014-07-10 19:48:45</em></span></div>
</div>
<div class="clearfix"></div>

  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
            <script type="text/javascript">
var uyan_config={
     'url':'http://blog.higrid.net/posts/linux-basic-command.html',
'su':'linux-basic-command'
};
_js2load.push({src:'http://v2.uyan.cc/code/uyan.js?uid=1600048'});
</script>

    
            <!--wumii_relatedItems-->
    
            
<script type="text/javascript">var ujian_config = {num:6,showType:0,picSize:84,textHeight:45};_js2load.push({src:'http://v1.ujian.cc/code/ujian.js?uid=1600048'});</script>
<a href="http://www.ujian.cc" style="border:0;"><img src="http://img.ujian.cc/pixel.png" alt="友荐云推荐" style="border:0;padding:0;margin:0;" /></a>
    
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
<script src="/js/chenall.js" type="text/javascript"></script>
  </body>
</html>
